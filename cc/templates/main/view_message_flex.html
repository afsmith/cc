{% extends "base_template.html" %}
{% load extras i18n staticfiles %}

{% block meta_title %}{{ message.subject }}{% endblock %}

{% block title %}{{ message.subject }}{% endblock %}

{% block content %}

{% if ocl_expired %}
    <p class="alert">
        {% trans "This link is expired. Please request another link from the sender." %}
    </p>
{% else %}
    <div id="message_viewer" class="flexpaper_viewer"></div>
{% endif %}

{% endblock %}


{% block additional_css %}
    <link rel="stylesheet" href="{% static 'css/vendor/flexpaper.css' %}">
{% endblock %}

{% block js_scripts %}
    <script src="{% static 'js/vendor/flexpaper/jquery.extensions.min.js' %}"></script>
    <script src="{% static 'js/vendor/flexpaper/flexpaper.js' %}"></script>
    <script src="{% static 'js/vendor/flexpaper/flexpaper_handlers.js' %}"></script>

    {% if not ocl_expired and not is_owner_viewing %}
    <!--script type="text/javascript">
        var message_data = {
            message_id: {{ message.id }},
            user_id: {{ ocl_user.id }},
            page_count: {{ page_list|length }},
            token: '{{ token }}'
        };
    </script-->
    {% endif %}

    <script>
        $('#message_viewer').FlexPaperViewer({ 
            config : {
                PDFFile: '{{ original_url }}',
Scale: 1,
                /*Scale : 0.6,
                ZoomTransition : 'easeOut',
                ZoomTime : 0.5,
                ZoomInterval : 0.1,
                FitPageOnLoad : true,
                FitWidthOnLoad : false,
                FullScreenAsMaxWindow : false,
                ProgressiveLoading : false,
                MinZoomSize : 0.2,
                MaxZoomSize : 5,
                SearchMatchAll : false,
                InitViewMode : 'Portrait',
                RenderingOrder : 'html5,flash',
                StartAtPage : '',

                ViewModeToolsVisible : true,
                ZoomToolsVisible : true,
                NavToolsVisible : true,
                CursorToolsVisible : true,
                SearchToolsVisible : true,
                WMode : 'window',
                localeChain: 'en_US'*/
            }   
        });
    </script>

    <!--script src="{% static 'js/view_message.js' %}"></script-->
{% endblock %}